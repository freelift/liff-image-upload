<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏ä‡∏ó</title>
</head>
<body>
  <h2>üì§ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏ä‡∏ó</h2>
  <input type="file" id="imageInput" accept="image/*" style="display: none;" />
  <img id="preview" width="200" />

  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
    async function main() {
      await liff.init({ liffId: "2007890470-ryZVnqlX" }); // üëà ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢ LIFF ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì

      const imageInput = document.getElementById('imageInput');
      const preview = document.getElementById('preview');

      // ‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
      window.onload = () => {
        imageInput.click();
      };

      // ‡∏™‡πà‡∏á‡∏†‡∏≤‡∏û‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏ä‡∏ó‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ
      imageInput.addEventListener('change', async function () {
        const file = imageInput.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = async function (e) {
          const base64 = e.target.result;

          preview.src = base64;

          // ‡∏™‡πà‡∏á‡∏†‡∏≤‡∏û‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏ä‡∏ó LINE
          await liff.sendMessages([
            {
              type: "image",
              originalContentUrl: base64,
              previewImageUrl: base64
            }
          ]);

          alert("‚úÖ ‡∏™‡πà‡∏á‡∏†‡∏≤‡∏û‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
          liff.closeWindow();
        };
        reader.readAsDataURL(file);
      });
    }

    main();
  </script>
</body>
</html>
